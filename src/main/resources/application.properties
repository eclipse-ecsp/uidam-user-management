application.security.disabled=true
service.name=${spring_application_servicename:uidam-user-management}
spring.application.version=${spring_application_version:1.0}
spring.application.servicename=${spring_application_servicename:uidam-user-management}
spring.application.name=${spring_application_name:uidam-user-management}

postgres.jdbc.url=${POSTGRES_DATASOURCE:jdbc:postgresql://localhost:5432/ChangeMe}
postgres.username=${POSTGRES_USERNAME:ChangeMe}
postgres.password=${POSTGRES_PASSWORD:ChangeMe}
postgres.driver.class.name=org.postgresql.Driver
postgres.pool.name=hikariConnectionPool
postgres.data-source-properties.cachePrepStmts=${postgres_data_source_properties_cachePrepStmts:true}
postgres.data-source-properties.prepStmtCacheSize=${postgres_data_source_properties_prepStmtCacheSize:250}
postgres.data-source-properties.prepStmtCacheSqlLimit=${postgres_data_source_properties_prepStmtCacheSqlLimit:2048}
postgres.max.idle.time=${postgres_max_idle_time:0}
postgres.min.pool.size=${postgres_min_pool_size:15}
postgres.max.pool.size=${postgres_max_pool_size:30}
postgres.connection.timeout.ms=${postgres_connection_timeout_ms:60000}
postgres.expected99thPercentileMs=${postgres_expected99thPercentileMs:60000}
postgres.datasource.create.retry.count=${postgres_create_retry_count:3}
postgres.datasource.retry.delay.ms=${postgres_retry_delay:30}
postgresdb.metrics.enabled=${postgresdb_metrics_enabled:false}
postgresdb.metrics.executor.shutdown.buffer.ms=${postgresdb_metrics_executor_shutdown_buffer_ms:2000}
postgresdb.metrics.thread.freq.ms=${postgresdb_metrics_thread_freq_ms:5000}
postgresdb.metrics.thread.initial.delay.ms=${postgresdb_metrics_thread_initial_delay_ms:2000}

health.postgresdb.monitor.enabled=${health_postgresdb_monitor_enabled:false}
health.postgresdb.monitor.restart.on.failure=${health_postgresdb_monitor_restart_on_failure:false}
metrics.prometheus.enabled=${metrics_prometheus_enabled:false}

prometheus.agent.port=${prometheus_agent_port:9100}
prometheus.agent.port.exposed=${prometheus_agent_port_exposed:9100}

spring.jpa.hibernate.ddl-auto=none
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.default_schema=${UIDAM_DEFAULT_DB_SCHEMA:uidam}
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.show-sql=${SHOW_SQL:false}

# Enable bean definition overriding to resolve dataSource bean conflicts between 
# our MultiTenantDatabaseConfig and PostgresDbConfig from sql-dao dependency
spring.main.allow-bean-definition-overriding=true

###API GATEWAY Configuration###
api.registry.enabled=${api_registry_enabled:false}
api.registry.service-name=${api_registry_service-name:http://api-registry-int-svc.data-platform}
api.security.enabled=${api_security_enabled:false}
api.gatewayUrls="${api_gatewayUrls:api-gateway3-int-svc.data-platform:7000}"
api.gateway.default.filters="JwtAuthValidator"
server.port=8080
openapi.path.include=${openapi_path_include:/v1/users/**, /v2/users/**, /v1/users/filter, /v1/users/{id}, /v2/users/{id}, /v1/users,/*/v1/emailVerification/{userId}/isEmailVerified, /*/v1/emailVerification/{token}, /v1/oauth2/client/**, /v1/oauth2/client/{clientId}, /v1/oauth2/client, /v1/roles/**, /v1/roles/filter, /v1/roles/{name}, /v1/roles/rolesById, /v1/roles, /v1/scopes/**, /v1/scopes/{name}, /v1/scopes/filter,/v1/accounts/**, /v1/accounts/filter, /v1/accounts/{id}, /v1/accounts, /v1/users/status, /v1/users/external, /v1/users/external/{id}, /v1/users/{user_id}/accountRoleMapping, /v1/self/recovery/resetpassword,/v1/password-policies/**}
openapi.exclude=""
#Actuators
management.endpoint.health.show-details=always
management.endpoint.health.probes.enabled=true
management.health.livenessState.enabled=true
management.health.readinessState.enabled=true
management.health.db.enabled=false

###Logging level
logging.level.org.eclipse.ecsp.uidam.usermanagement=INFO
logging.level.org.hibernate.SQL=ERROR
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=ERROR
logging.level.root=INFO

###Graylog Configuration###
APP_GRAYLOG_ENABLED=${GRAYLOG_ENABLE:false}
APP_GRAYLOG_HOST=${GRAYLOG_HOST:graylog.default.svc.cluster.local}
APP_GRAYLOG_PORT=${GRAYLOG_PORT:12201}
APP_NEVER_BLOCK_FOR_GRAYLOG=${NEVER_BLOCK_FOR_GRAYLOG:false}
APP_LOG_FOLDER=${LOG_FOLDER:logs/}
APP_LOG_LEVEL=${LOG_LEVEL:ERROR}
APP_IGNITE_LOG_LEVEL=${IGNITE_LOG_LEVEL:ERROR}
APP_SVC_LOG_LEVEL=${SVC_LOG_LEVEL:ERROR}
APP_STORAGE_LOG_LEVEL=${STORAGE_LOG_LEVEL:ERROR}
APP_SPRING_LOG_LEVEL=${SPRING_LOG_LEVEL:ERROR}
APP_REGISTRY_COMMON_LOG_LEVEL=${REGISTRY_COMMON_LOG_LEVEL:ERROR}
APP_LOG_APPENDER=${LOG_APPENDER:ASYNC-GELF}

#Registered client
hash.algorithm=SHA-256
security.password.policy.check-interval=60s

# Multi-tenant Liquibase Configuration (moved tenant-specific properties to tenant files)
# Enable Spring Boot's Liquibase for custom LiquibaseConfig to work properly
spring.liquibase.enabled=true
uidam.liquibase.change-log.path=${UIDAM_LIQUIBASE_CHANGE_LOG_PATH:classpath:database.schema/master.xml}
uidam.default.db.schema=${UIDAM_DEFAULT_DB_SCHEMA:uidam}

management.endpoints.web.exposure.include=health,info,prometheus,metrics

## Notification Configurations
##TODO:WE are not yet migrated to tenant specific notification configs
notification.email.provider=${notification_email_provider:internal}
#notification.sms.provider=${notification_sms_provider:internal}
#notification.push.provider=${notification_push_provider:internal}
notification.email.provider.host=${notification_email_provider_host:smtp.gmail.com}
notification.email.provider.port=${notification_email_provider_port:587}
notification.email.provider.username=${notification_email_provider_username:ChangeMe}
notification.email.provider.passwd=${notification_email_provider_passwd:ChangeMe}
notification.email.provider.properties.mail.smtp.auth=${notification_email_provider_properties_mail_smtp_auth:true}
notification.email.provider.properties.mail.smtp.starttls.enabled=${notification_email_provider_properties_mail_smtp_starttls_enable:true}
notification.email.provider.properties.mail.smtp.starttls.required=${notification_email_provider_properties_mail_smtp_starttls_required:true}
notification.email.provider.properties.mail.smtp.ssl.enabled=${notification_email_provider_properties_mail_smtp_ssl_enable:false}
notification.email.provider.properties.mail.debug=${notification_email_provider_properties_mail_debug:false}
#notification config
notification.config.resolver=${notification_config_resolver:internal}
notification.config.path=${notification_config_path:classpath:/notification/uidam-notification-config.json}

# template engine
template.engine=${notification_template_engine:thymeleaf}
template.format=${notification_template_format:HTML}
template.resolver=${notification_template_resolver:CLASSPATH}
template.prefix=${notification_template_prefix:/notification/}
template.suffix=${notification_template_suffix:.html}

# Multi-tenant configuration
tenant.ids=${TENANT_IDS:ecsp,sdp}
tenant.default=${TENANT_DEFAULT:ecsp}

spring.config.import=optional:classpath:tenant-ecsp.properties,optional:classpath:tenant-sdp.properties
